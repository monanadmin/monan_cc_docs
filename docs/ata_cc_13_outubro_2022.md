# 13 de Outubro de 2022

## ATA 002/2022 - Revisão 002

![type:video](https://youtube.com/embed/OYq1sglZH_4)


??? info "Informações"

    === "Ata da Reunião do Comitê Científico do MONAN"
    
        * Preparado por: Carlos Frederico Bastarz, relator
        * 13 de Outubro de 2022
        
        **Coordenação:** Saulo Ribeiro de Freitas e Pedro Leite da Silva Dias

    === "Histórico de Revisões"

        | REVISÃO | DATA DA REVISÃO | ALTERAÇÕES |
        |---------|-----------------|------------|
        | R000    | 14/10/2022      | <ul> <li> Versão inicial </li> </ul> |
        | R001    | 18/10/2022      | <ul> <li> Revisão geral por Carlos Bastarz/INPE </li> </ul> |
        | R002    | 19/10/2022      | <ul> <li> Revisão ortográfica por Carlos Bastarz/INPE </li> </ul> |
    
    === "Participações"
    
        **Membros Participantes**
        
        * **INPE:** Caio Augusto dos Santos Coelho, Carlos Frederico Bastarz, Celso Mendes, Celso Von Randow, Chou Sin Chan, Haroldo Fraga de Campos Velho, João Gerd Zell de Mattos, Joaquim Eduardo Rezende Costa, Jorge Luís Gomes, Luciano Ponzi Pezzi, Luiz Flávio Rodrigues, Paulo Yoshio Kubota, Ronald Buss de Souza, Saulo Renato Galante Negri, Ribeiro de Freitas.
        * **INMET:** Francisco Quixaba Filho, Gilberto Bonatti.
        * **UFCG:** Enio Pereira de Souza.
        * **CENSIPAM:** Ivan Saraiva.
        * **ITA:** Jairo Panetta.
        * **INPA:** Luiz Antonio Candido.
        * **UFSM:** Otávio Acevedo.
        * **USP:** Márcia Akemi Yamasoe, Pedro Leite da Silva Dias, Pedro da Silva Peixoto, Ricardo de Camargo.
        * **LNCC:** Roberto P. Souto.
        * **UFMS:** Vinícius Buscioli Capistrano.
        * **FAB:** José Hélio Abreu Nogueira.   
        * **MB:** Flávia Rodrigues Pinheiro, Walid Maia Pinto Silva e Seba.
        * **MCTI:** Antônio Marcos Mendonça.
        * **UFPA:** Júlia Clarinda Paiva Cohen.     
        * **WMO:** Daniel Alejandro Vila.

        **Participantes Convidados**
        
        * **INPE:** Ariane Frassoni Dos Santos De Mattos.
    
    === "Registro"
    
        **Local, Data e Hora**
        
        * Plataforma Cisco Webex
        * 13 de Outubro de 2022, das 15:00 horas às 17:00 horas
        
        **Link da gravação**
        
        * [https://youtu.be/OYq1sglZH_4](https://youtu.be/OYq1sglZH_4)
        
        **Repositório das apresentações**
        
        * [https://drive.google.com/drive/folders/1Mp2M0Dh0RfxtETDUzYLAdc9vlZD6FWW7?usp=sharing](https://drive.google.com/drive/folders/1Mp2M0Dh0RfxtETDUzYLAdc9vlZD6FWW7?usp=sharing)

Reunião do Comitê Científico do Modelo para Previsão dos Oceanos, Superfícies Terrestres e Atmosfera. Às 15:00 horas do dia 13 de Outubro de 2022, reuniram-se virtualmente os representantes do [INPE](https://www.gov.br/inpe/pt-br) (Instituto Nacional de Pesquisas Espaciais), [INMET](https://portal.inmet.gov.br/) (Instituto Nacional de Meteorologia), [UFCG](https://portal.ufcg.edu.br/) (Universidade Federal de Campina Grande), [CENSIPAM](https://www.gov.br/censipam/pt-br) (Centro Gestor e Operacional do Sistema de Proteção da Amazônia), [USP](https://www5.usp.br/) (Universidade de São Paulo), [LNCC](https://www.gov.br/lncc/pt-br) (Laboratório Nacional de Computação Científica), [UFMS](https://www.ufms.br/) (Universidade Federal do Mato Grosso do Sul), [FAB](https://www.fab.mil.br/index.php) (Força Aérea Brasileira), [MB](https://www.marinha.mil.br/) (Marinha do Brasil) e [MCTI](https://www.gov.br/mcti/pt-br) (Ministério da Ciência, Tecnologia e Inovações) com o objetivo de prosseguir com os trabalhos e discussões do Comitê Científico do Modelo para Previsão dos Oceanos, Superfícies Terrestres e Atmosfera. Esta ata registra a memória da reunião realizada e congrega as informações inseridas no chat, como links e outras informações pertinentes às discussões realizadas. Seguindo a abertura da reunião, conduzida pelos coordenadores institucionais Saulo Freitas/INPE e Pedro Dias/USP, este documento está orientado de acordo com as pautas estabelecidas pelo Saulo Freitas durante a sua apresentação.

Saulo Freitas inicia a reunião dando as boas vindas a todos os participantes e anuncia os itens a serem discutidos durante a reunião do CC do MONAN.

## Pauta 1 - Novos Membros

Saulo Freitas, na discussão da primeira pauta da reunião, anuncia os novos membros do CC do MONAN: 1. [Celso von Randow](http://lattes.cnpq.br/0535860239259102) da Divisão de Impactos, Adaptação e Vulnerabilidades ([DIIAV](http://www.ccst.inpe.br/)) do INPE; 2. [Renato Galante Negri](http://lattes.cnpq.br/1938964222771319) da Divisão de Satélites e Sistemas Meteorológicos ([DISSM](http://satelite.cptec.inpe.br/home/index.jsp?i=br)) do INPE e 3. [Antônio Marcos Mendonça](http://lattes.cnpq.br/4230309177760883) como representante do MCTI. Anuncia também que o membro Daniel Alejandro Vila foi convidado para ser representante da _World Meteorological Organization_ ([WMO](https://public.wmo.int/en)), e que, por este motivo, passará a ser um membro externo da WMO no CC do MONAN.

## Pauta 2 - Retrospectiva e Ações

Saulo Freitas, na discussão da segunda pauta da reunião, faz uma retrospectiva dos acontecimentos desde a primeira reunião do CC, comenta sobre as instituições participantes e que atualmente o CC conta com 35 membros. Fala sobre o desenvolvimento do MONAN constando no planejamento estratégico do INPE para os próximos 5 anos e que o programa já foi reconhecimento como um programa do MCTI, com orçamento próprio e duração inicial de 10 anos. Comenta sobre o convênio assinado com o _European Centre for Medium-Range Weather Forecasts_ ([ECMWF](https://www.ecmwf.int/)) para acesso aos códigos do _Open Integrated Forecasting System_ ([OpenIFS](https://www.ecmwf.int/en/research/projects/openifs)), acesso a dados, realização de seminários e treinamentos e a produção de um programa de visualização para malhas não estruturadas utilizando o [METView](https://www.ecmwf.int/en/elibrary/18136-metview). Comenta sobre o Termo de Abertura de Projeto (TAP) para o convênio com a _National Oceanic and Atmospheric Administration_ ([NOAA](https://www.noaa.gov/)).

Ainda dentro da retrospectiva, Saulo Freitas comenta que o ano corrente (2022) foi muito importante pela reorganização interna do INPE com foco no MONAN: cita que entre os dias 31/08 e 02/09, foi realizado um workshop interno da Coordenação Geral de Ciências da Terra ([CGCT](https://www.gov.br/inpe/pt-br/composicao/diretoria/coordenacao-geral-de-ciencias-da-terra-cgct)) do INPE, com o objetivo de discutir a reorganização das divisões Divisão de Modelagem Numérica do Sistema Terrestre ([DIMNT](http://www3.cptec.inpe.br/dimnt/)), Divisão de Satélites e Sistemas Meteorológicos (DISSM) e Divisão de Previsão de Tempo e Clima (DIPTC) do centro em torno do desenvolvimento do MONAN. Comenta que, nesta reorganização, foram estabelecidos grupos transversais (denominados macrogrupos), formados com membros de todas as três divisões. Acrescenta que foram também realizados outros workshops internos sobre os temas atmosfera, oceanos e criosfera e [assimilação de dados](https://monanadmin.github.io/monan_ad/ata_workshop_6_7_setembro_2022/), como preparação para os desenvolvimentos do MONAN. Cita que a organização dos macrogrupos foi estruturada e registrada no Serviço Eletrônico de Informações (SEI). Saulo Freitas comenta também sobre a busca de recursos com o apoio do diretor do INPE, [Clézio Marcos De Nardin](https://www.gov.br/inpe/pt-br/composicao/diretoria/clezio-marcos-de-nardin), e do coordenador da CGCT, [Gilvan Sampaio de Oliveira](https://www.gov.br/inpe/pt-br/composicao/diretoria/coordenacao-geral-de-ciencias-da-terra-cgct/gilvan-sampaio-de-oliveira). Cita a aprovação do projeto Renovação da Infraestrutura de Computação do INPE (RISC), com orçamento de R$ 200 milhões em 4 anos, aprovados pela [FINEP](http://www.finep.gov.br/). O projeto possui 7 metas, sendo 3 delas destinadas à operacionalização do MONAN utilizando o novo supercomputador. Saulo Freitas comenta também sobre a proposta do MONAN como um Instituto Nacional de Ciência e Tecnologia ([INCT](http://inct.cnpq.br/)), com perspectiva orçamentária de R$ 7 milhões em 5 anos, geridos por 11 membros do CC do MONAN. Comenta também sobre outra busca de recurso, um pedido de orçamento para 2023, com R$ 5 milhões anuais, sendo aprovado como programa do MCTI. Com isso, foi submetida uma proposta para linha de CT&I na Fundo Nacional de Desenvolvimento Científico e Tecnológico ([FNDCT](http://www.finep.gov.br/a-finep-externo/fndct/fndct)) para custeio/capital. Outra proposta que pode ser trabalhada é dentro do Programa FAPESP de Pesquisa sobre Mudanças Climáticas Globais ([PFPMCG](https://fapesp.br/pfpmcg/)), dentro do tema de alterações no uso e ocupação da terra e agropecuária, estratégias de redução de emissões de gases e efeito estufa e adaptação às mudanças do clima.

## Pauta 3 - Relatório do subcomitê de PAD

Luiz Flávio inicia a sua apresentação comentando sobre as atividades realizadas pelo Grupo de Computação Científica (GCC), sendo uma delas a análise de 3 núcleos dinâmicos para o MONAN. Luiz Flávio comenta sobre a formação da equipe, composta pelos servidores [Carlos Renato de Souza](http://lattes.cnpq.br/2349556260957146), [Denis Magalhães de Almeira Eiras](http://lattes.cnpq.br/5730926226268088), [Eduardo Georges Khamis](http://lattes.cnpq.br/8750542728494463), [João Messias Alves da Silva](http://lattes.cnpq.br/0185098295394379) do INPE e o servidor Roberto P. Souto do LNCC. Comenta que a equipe está sendo aumentada e que se dedicou muito ao trabalho realizado. Cita que o códigos avaliados foram o _Global Eta Framework_ ([GEF](https://bdtd.ibict.br/vufind/Record/INPE_6222c92138c160b4406374440fe14b9c)), o _Finite Volume 3_ ([FV3](https://www.gfdl.noaa.gov/fv3/)) e o _Model for Prediction Across Scales_ ([MPAS](https://ncar.ucar.edu/what-we-offer/models/model-prediction-across-scales-mpas)), lembrando que os modelos FV3 e MPAS já foram avaliados pela NOAA. Luiz Flávio comenta que as avaliações realizadas tiveram o código-fonte dos modelos como foco e não foram considerados os requisitos não funcionais, i.e., se os núcleos dinâmicos representam bem a física ou não. A avaliação funcional dos modelos será realizada pelo Grupo de Avaliação de Modelos ([GAM](https://github.com/GAM-DIMNT-CPTEC)) do INPE. Para a avaliação foram abordados os aspectos de manutenibilidade, portabilidade, performance, escalabilidade e eficiência. Cita que todas as tarefas foram realizadas e registradas no [GitHub](https://github.com/monanadmin/monan) e no [ZenHub](https://app.zenhub.com/workspaces/gcc-monan-62a3a783cb59a00014ce8e70/board) do MONAN. No primeiro tópico, manutenibilidade, o modelo MPAS foi o que obteve a maior pontuação (22 pontos), muito próximo do FV3 (20 pontos). Sobre a portabilidade, o modelo MPAS também fez mais pontos (8,2 pontos para o MPAS e 4,4 para o FV3). Luiz Flávio comenta que o relatório com as regras, pontuações e os resultados completos desta avaliação, estão disponíveis no documento [Relatório da Avaliação Computacional de Núcleos Dinâmicos](https://github.com/monanadmin/monan/blob/main/doc/Relatorio_Avaliacao_Computacional_Core_Dinamico%20(1).pdf).

Luciano Pezzi pergunta para Luiz Flávio sobre os valores negativos de pontuação, atribuídos a alguns pacotes utilizados pelos núcleos dinâmicos. Luiz Flávio comenta que os pontos são removidos porque a instalação de alguns destes pacotes não é trivial, o que aumenta a complexidade de utilização do código-fonte dos modelos. 

Em seguida, Luiz Flávio convida Roberto Souto para explicar os resultados de paralelismo e eficiência do código (qualidade de código e Performance, Escalabilidade e Eficiência - PEE), considerando o modelo MPAS 15 km, em uma simulação de 24 horas sem a física do modelo. Com problemas técnicos de Roberto Souto, Luiz Flávio retoma a apresentação. Sobre a análise de qualidade de código, no quesito PEE, o modelo MPAS 15 Km foi testado para previsões de apenas 24 horas devido às limitações de tempo e de uso da máquina Rattler da Dell. Em processamento para _Graphics Processing Unit_ (GPU), o modelo MPAS foi mais rápido do que o modelo FV3, inclusive sendo mais rápido o que ele próprio quando utilizado apenas com processamento via CPU. Em geral, no aspecto PEE, o modelo MPAS foi ligeiramente melhor do que o modelo FV3, apesar de o modelo FV3 ser mais fácil de se trabalhar (é mais simples do ponto de vista do código-fonte). Luiz Flávio comenta que, a versão atual do modelo MPAS perde em tempo de processamento para o modelo FV3. 

Saulo Freitas comenta sobre o bom trabalho realizado pelo GCC em relação ao relatório de avaliação dos núcleos dinâmicos e, em seguida, abre para perguntas.

Pedro Dias questiona Luiz Flávio se a documentação para o usuário final também foi avaliada. Luiz Flávio comenta que este foi um dos requisitos da avaliação, que é a quantidade do número de linhas de código documentáveis. Pedro Dias complementa a pergunta sobre o manual de uso e das opções de cada modelos e se isso foi avaliado também. Luiz Flávio responde que para o modelo FV3, esse tipo de documentação não estava disponível, mas que a organização da comunidade é ágil quando aos questionamentos dos usuários. Luiz Flávio complementa dizendo que apenas a documentação do código é que foi avaliada.

Vinicius Capistrano pergunta sobre a estrutura de acoplamento do modelo FV3 e se as avaliações levaram em consideração isso também. Luiz Flávio responde que sim.

Saulo Freitas comenta sobre o aspecto da complexidade do código, sendo bastante evidente a diferença entre os modelos MPAS e FV3. Nesse sentido, Saulo Freitas cita a questão de envolvimento da comunidade, para a qual a simplicidade do código é importante. Nesse sentido, pergunta para Luiz Flávio se o aspecto da programação em GPU será uma dificuldade para a comunidade. Luiz Flávio responde dizendo que, atualmente, a programação para GPUs não é mais um grande desafio e que a linguagem de programação _Compute Unified Device Architecture_ ([CUDA](https://pt.wikipedia.org/wiki/CUDA)) avançou bastante a ponto de se utilizar o [OpenACC](https://www.openacc.org/), o que facilita sobremaneira a programação através da inserção de diretivas no código-fonte, as quais indicam para o compilador quais partes do código deverão ser processadas em GPU.

Enio Souza pergunta para Luiz Flávio se o processamento via GPU é um requerimento do MONAN, se esse requerimento já estava definido ou não. Luiz Flávio responde que esse é um aspecto que ainda está em aberto e que não necessariamente será utilizado de forma direta. Apesar disso, o processamento via GPU está mais focado em aplicações que dependem da inteligência artificial. Cita o artigo [_High-Performance Computing in Meteorology under a Context of an Era of Graphical Processing Units_ (Nakaegawa, 2022)](https://drive.google.com/file/d/1XGMxjg0usac-sdZcuyF_byP1Yh0rmmqA/view?usp=sharing) onde é feito um levantamento dos centros que utilizam GPUs para o processamento de modelos numéricos. A maioria dos centros ainda está utilizando CPUs.

Caio Coelho pergunta sobre a aplicação dos núcleos dinâmicos dos modelos MPAS e FV3 para as escalas subsazonal, sazonal a climática. Saulo Freitas responde que essa questão, que envolve a física, ainda está por ser estudada e que na etapa atual das avaliações, o objetivo é testar a qualidade dos núcleos dinâmicos para verificar a sua eficiência computacional. Pedro Dias comenta que, por enquanto, nenhum centro está aplicando o modelo MPAS para previsões nestas escalas. Saulo Freitas complementa dizendo que, para estas escalas, é a física do modelo que domina a habilidade de previsão do modelo e não a dinâmica, pois os erros de primeira ordem são dominados pela física. Acrescenta que, se quisermos um modelo pronto para a escala sazonal, devemos escolher o modelo FV3, mas quisermos um modelo para o qual possamos contribuir com o nosso legado e fazer com que funcione de forma competitiva em todas as escalas, devemos escolher o modelo MPAS. Antonio Manzi sugere a criação de um subgrupo dentro do CC do MONAN que mantenha contato com o pessoal do _National Center for Atmospheric Research_ ([NCAR](https://ncar.ucar.edu/)) para acompanhar os desenvolvimentos do MPAS para as escalas de previsão que o Caio Coelho abordou em seu comentário. Pedro Dias se comprometeu em conversar com alguns de seus contatos no NCAR.

## Pauta 4 - Planejamento da Avaliação sob os Aspectos Meteorológicos

Passando para a próxima pauta, Saulo Freitas convida a pesquisadora [Ariane Frassoni dos Santos de Mattos](http://lattes.cnpq.br/9897358688381968)/INPE para a sua apresentação sobre a avaliação funcional com a comparação dos resultados dos núcleos dinâmicos dos modelo MPAS e FV3.

Ariane Frassoni inicia a sua apresentação que aborda os núcleos dinâmicos sob o ponto de vista meteorológico e de qualidade do código-fonte. Comenta que o objetivo é determinar métricas para a avaliação dos núcleos dinâmicos para que sejam utilizadas no MONAN. As características dos aspectos funcionais dos núcleos dinâmicos envolvem a adequação, acurácia, interoperabilidade, conformidade e segurança. Durante a sua apresentação, Ariane Frassoni cita os requisitos para o núcleo dinâmico não-hidrostático e que, os núcleos dinâmicos que não possuírem essa característica, são considerados inaptos para as aplicações pretendidas para o MONAN.

Saulo Freitas agradece a apresentação e abre para a discussão. Pedro Peixoto pergunta se o pré-processamento e o pós-processamento, que foram utilizados para gerar os resultados apresentados pela Ariane Frassoni, estão públicos no GitHub, pois há o interesse em se reunir todas as informações em apenas um repositório. Comenta que possui alguns programas e scripts com os quais pode contribuir também e que é importante fazer esses desenvolvimentos de forma colaborativa. Saulo Freitas e Luiz Flávio concordam com a proposição de Pedro Peixoto e Luiz Flávio comenta que esses códigos podem ser colocados no repositório do MONAN.

Pedro Dias comenta que é importante ter ferramentas de diagnósticos objetivos a para avaliação de modelos numéricos, mas que é preciso fazer comparações com os dados reais observados (e.g., radiossonda) também.

## Ações Para a Próxima Reunião

1. Criar um canal de comunicação com os desenvolvedores do NCAR para o acompanhamento do desenvolvimento do modelo MPAS para aplicações em escalas subsazonal a climática;
2. Criar um canal de colaboração entre o Grupo de Avaliação de Modelos da DIMNT (GAM) e o grupo de pesquisa do Pedro Peixo para o compartilhamento de scripts e programas de pré-processamento e pós-processamento para o MPAS;
3. Conversar com o Roberto Souto sobre o que é possível executar no supercomputador Santos Dumont do LNCC para os experimentos com os núcleos dinâmicos MPAS e FV3;
4. Relatório do João Gerd sobre a realização do Workshop DAS-DIMNT (Assimilação de Dados).

??? example "Anexos"

    * [Gravação da Reunião do Comitê Científico do MONAN - 13 de Outubro de 2022]()
    * [Slides Saulo Freitas](https://drive.google.com/file/d/1zygyxtj6_vr3dPpkBsUdBli04UKlKJmd/view?usp=sharing)
    * [Apresentação Luiz Flávio](https://drive.google.com/file/d/1q8t90nqOan7lAlJU7CQyLIDpNCzhB3qI/view?usp=sharing)
    * [Apresentação Ariane Frassoni](https://drive.google.com/file/d/1omeScQiOmKT2Jthy7SeFeoUxtYSX6OZ5/view?usp=sharing)
    * [Artigo Nakaegawa (2022)](https://drive.google.com/file/d/1XGMxjg0usac-sdZcuyF_byP1Yh0rmmqA/view?usp=sharing)
    * [Relatório da Avaliação Computacional de Núcleos Dinámicos](https://github.com/monanadmin/monan/blob/main/doc/Relatorio_Avaliacao_Computacional_Core_Dinamico%20(1).pdf)
